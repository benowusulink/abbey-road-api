function e(e,t,s,n){Object.defineProperty(e,t,{get:s,set:n,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8ea6,s=t.register;s("aDlaE",function(s,n){e(s.exports,"NewsController",()=>l);var i=t("aMyGe"),a=t("8EzGk");class l{constructor(){console.log("news controller working"),this.model=new(0,a.NewsModel),this.view=new(0,i.NewsView),this.render_news_articles_and_news_categories()}render_news_articles_and_news_categories=()=>{this.model.registerListener(e=>{this.view.creating_and_render_news_articles(e),this.view.creating_and_render_news_categories(e)}),this.model.fetch_news().then(e=>{e.success?this.view.news_main_section1_nav1_ul1_li_hover(this.filter_news_categories):console.log("error",e)}).catch(e=>{console.log(e)})};filter_news_categories=e=>{this.model.filter_news_categories(e)}}}),s("aMyGe",function(t,s){e(t.exports,"NewsView",()=>n);class n{constructor(){}creating_and_render_news_articles=e=>{if(e.news_loading)document.getElementById("news-main-section1-section1-div1").style.display="flex";else if(document.getElementById("news-main-section1-section1-div1").style.display="none",!e.news_loading&&e.news.length>1&&(document.getElementById("news-main-section1-section1").replaceChildren(document.getElementById("news-main-section1-section1-div1")),e.news.forEach(e=>{let t=document.createElement("article"),s=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),l=document.createElement("span"),o=document.createElement("span"),c=document.createElement("h3"),r=document.createElement("h4"),d=document.createElement("h5"),m=document.createElement("img"),w=document.createElement("p");document.getElementById("news-main-section1-section1").appendChild(t),t.append(s,n),s.append(l,o),l.appendChild(r),o.appendChild(c),n.append(i,a),i.append(m,d),a.appendChild(w),t.classList.add("news-main-section1-section1-article"),s.classList.add("news-main-section1-section1-article-div1"),l.classList.add("news-main-section1-section1-article-div1-span"),l.id="news-main-section1-section1-article-div1-span1",r.classList.add("news-main-section1-section1-article-div1-span1-h4"),o.classList.add("news-main-section1-section1-article-div1-span"),o.id="news-main-section1-section1-article-div1-span2",c.classList.add("news-main-section1-section1-article-div1-span1-h3"),n.classList.add("news-main-section1-section1-article-div2"),i.classList.add("news-main-section1-section1-article-div2-div1"),m.classList.add("news-main-section1-section1-article-div2-div1-img"),d.classList.add("news-main-section1-section1-article-div2-div1-h5"),a.classList.add("news-main-section1-section1-article-div2-div2"),w.classList.add("news-main-section1-section1-article-div2-div2-p"),r.textContent=`Date Published: ${e.news_date}`,c.textContent=e.news_headline,d.textContent=`Category: ${e.news_category}`,r.textContent=`Date Published: ${e.news_date}`,w.textContent=e.news_article,m.setAttribute("src",e.news_image),m.setAttribute("alt",`${e.news_headline},  No image available`.padStart(1))})),!e.news_loading&&0===e.news.length){let e=document.getElementById("news-main-section1-section1");e.replaceChildren(document.getElementById("news-main-section1-section1-div1"));let t=document.createElement("div"),s=document.createElement("h3");e.appendChild(t),t.append(s),t.setAttribute("id","news-main-section1-section1-div1"),s.setAttribute("id","news-main-section1-section1-div1-h3"),s.textContent="Currently No News to Display"}};creating_and_render_news_categories=e=>{let t=document.getElementById("news-main-section1-nav1-ul-li-ul2");if(e.news_categories_loading){let e=Array.from(document.getElementsByClassName("news-main-section1-nav1-ul-li-ul-li2"));e&&e.forEach(e=>{e.style.display="none"}),document.getElementById("news-main-section1-nav1-ul-li-ul-li1").style.display="block"}else{let s=document.getElementById("news-main-section1-nav1-ul-li-ul-li1");s&&(s.style.display="none"),t.replaceChildren(document.getElementById("news-main-section1-nav1-ul-li-ul-li1")),e.news_categories.forEach(e=>{let s=document.createElement("li"),n=document.createElement("p");s.setAttribute("class","news-main-section1-nav1-ul-li-ul-li2"),s.setAttribute("name",e),n.setAttribute("class","news-main-section1-nav1-ul-li-ul-li-p"),n.textContent=e,t.append(s),s.append(n)})}};news_main_section1_nav1_ul1_li_hover=e=>{Array.from(document.getElementsByClassName("news-main-section1-nav1-ul-li")).forEach(e=>{if("news-main-section1-nav1-ul-li1"===e.id){let s=document.getElementById("news-main-section1-nav1-ul-li-ul1");e.addEventListener("mouseenter",e=>{console.log("mainli1 mouse enter"),s.style.display="block",t(s)}),e.addEventListener("mouseleave",e=>{console.log("mainli1 mouse leave"),s.style.display="none"})}else if("news-main-section1-nav1-ul-li2"===e.id){let s=document.getElementById("news-main-section1-nav1-ul-li-ul2");e.addEventListener("mouseenter",e=>{console.log("mainli1 mouse enter"),s.style.display="block",t(s)}),e.addEventListener("mouseleave",e=>{console.log("mainli2 mouse leave"),s.style.display="none"})}});let t=t=>{"news-main-section1-nav1-ul-li-ul1"===t.id?Array.from(document.getElementsByClassName("news-main-section1-nav1-ul-li-ul-li1")).forEach(s=>{s.dataset.listenerAdded||(s.addEventListener("click",n=>{console.log(s.getAttribute("name")),e(s.getAttribute("name")),t.style.display="none"}),s.dataset.listenerAdded="true")}):"news-main-section1-nav1-ul-li-ul2"===t.id&&Array.from(document.getElementsByClassName("news-main-section1-nav1-ul-li-ul-li2")).forEach(s=>{s.dataset.listenerAdded||(s.addEventListener("click",n=>{console.log(s.getAttribute("name")),e(s.getAttribute("name")),t.style.display="none"}),s.dataset.listenerAdded="true")})}}}}),s("8EzGk",function(t,s){e(t.exports,"NewsModel",()=>n);class n{constructor(){this.state={news:[],news_loading:!1,news_categories:[],news_categories_loading:!1},this.listeners=[]}setState=e=>(this.state={...this.state,...e},this.notifyListeners(),console.log(this.state),this.state);getState=e=>{if(this.state[e])return this.state[e];console.log("no state exists")};registerListener=e=>{this.listeners.push(e),e(this.state)};notifyListeners=()=>{this.listeners.forEach(e=>{e(this.state)})};fetch_news=()=>(this.setState({news:[],news_loading:!0,news_categories_loading:!0}),fetch("https://abbey-road-api.onrender.com/api/news_page/fetch_news").then(e=>e.json()).then(e=>e.success&&e.data.length>0?(this.setState({news:e.data,news_loading:!1}),this.fetch_news_categories().then(e=>e.success?Promise.resolve(e):Promise.reject(!1)).catch(e=>(console.log(e),Promise.reject(!1)))):(this.setState({news:[],news_loading:!1}),Promise.resolve({success:!0}))).catch(e=>(this.setState({news:[],news_loading:!1}),Promise.resolve(!1))));fetch_news_categories=()=>{if(!(this.getState("news").length>0))return this.setState({news_categories_loading:!1,news_categories:["Updates","Community","Services"]}),Promise.resolve({success:!0});{let e=["Updates","Community","Services"],t=[];return this.getState("news").forEach(e=>{let s=e.news_category.trim(),n=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase();t.includes(n)||t.push(n)}),t.forEach(t=>{e.includes(t)||e.push(t)}),console.log(e),this.setState({news_categories_loading:!1,news_categories:e}),Promise.resolve({success:!0})}};filter_news_categories=e=>{switch(e){case"Latest News":let t=[...this.getState("news")].sort((e,t)=>{let s=new Date,[n,i,a]=e.news_date.split("-").map(Number),[l,o,c]=t.news_date.split("-").map(Number),r=new Date(a,i-1,n);return Math.abs(r-s)-Math.abs(new Date(c,o-1,l)-s)});console.log(t),this.setState({news:t});break;case"Oldest News":let s=[...this.getState("news")].sort((e,t)=>{let s=new Date,[n,i,a]=e.news_date.split("-").map(Number),[l,o,c]=t.news_date.split("-").map(Number),r=new Date(a,i-1,n),d=new Date(c,o-1,l),m=Math.abs(r-s);return Math.abs(d-s)-m});this.setState({news:s});break;default:let n=[...this.getState("news")].sort((t,s)=>{if(t.news_category===e&&s.news_category!==e)return -1;if(s.news_category===e&&t.news_category!==e)return 1;let[n,i,a]=t.news_date.split("-").map(Number),[l,o,c]=s.news_date.split("-").map(Number),r=new Date(a,i-1,n);return new Date(c,o-1,l)-r});this.setState({news:n})}}}});
//# sourceMappingURL=controller.1662b929.js.map
