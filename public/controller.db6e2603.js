function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8ea6,i=t.register;i("8GHbB",function(i,n){e(i.exports,"Login_controller",()=>l);var s=t("dx8Tm"),o=t("eyBzO");class l{constructor(){this.view=new(0,o.Login_view),this.model=new(0,s.Login_model),this.view.click_submit_form(this.model.login_admin),this.model.registerListener(e=>{this.view.render_submit_Form(e)})}}}),i("dx8Tm",function(t,i){e(t.exports,"Login_model",()=>n);class n{constructor(){this.state={password:null,loading:!1,loggedIn:!1,failed_login:!1},this.listeners=[]}setState=e=>(this.state={...this.state,...e},this.notifyListeners(),console.log(this.state),this.state);getState=e=>{if(this.state[e])return this.state[e];console.log("no state exists")};registerListener=e=>{this.listeners.push(e),e(this.state)};notifyListeners=()=>{this.listeners.forEach(e=>{e(this.state)})};login_admin=e=>(this.setState({password:e,loading:!0,loggedIn:!1,failed_login:!1}),fetch("https://abbey-road-api.onrender.com/api/login-page/login_admin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e}),credentials:"include"}).then(e=>e.json()).then(e=>{e.status?this.setState({password:null,loading:!1,loggedIn:!0,failed_login:!1}):this.setState({password:null,loading:!1,loggedIn:!1,failed_login:!0})}).catch(e=>{console.log(e),this.setState({password:null,loading:!1,loggedIn:!1,failed_login:!0})}))}}),i("eyBzO",function(t,i){e(t.exports,"Login_view",()=>n);class n{constructor(){}click_submit_form=e=>{let t=document.getElementById("login-main-form"),i=document.getElementById("login-password");t.addEventListener("submit",t=>{t.preventDefault(),e(i.value),i.value=""})};render_submit_Form=e=>{if(e.loading){let e=document.getElementById("login-main-form-div1"),t=document.getElementById("login-page-loading"),i=document.getElementById("login-main-p1");e.style.display="block",t.style.display="block",i.style.display="none"}else if(e.loggedIn)window.location.href="./admin.html";else if(e.failed_login){let e=document.getElementById("login-main-form-div1"),t=document.getElementById("login-main-p1"),i=document.getElementById("login-page-loading");e.style.display="block",t.style.display="flex",i.style.display="none"}}}});
//# sourceMappingURL=controller.db6e2603.js.map
