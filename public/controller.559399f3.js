function e(e,t,n,s){Object.defineProperty(e,t,{get:n,set:s,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8ea6,n=t.register;n("fJlDI",function(n,s){e(n.exports,"EventsController",()=>l);var i=t("eNqOo"),a=t("ewoyE");class l{constructor(){this.view=new(0,i.EventsView),this.model=new(0,a.EventsModel),this.render_event_articles_and_event_categories()}render_event_articles_and_event_categories=()=>{this.model.registerListener(e=>{this.view.creating_and_render_event_articles(e),this.view.creating_and_render_event_categories(e)}),this.model.fetch_events().then(e=>{e.success?this.view.events_main_section1_nav1_ul1_li_hover(this.filter_event_categories):console.log("error",e)}).catch(e=>{console.log(e)})};filter_event_categories=e=>{this.model.filter_event_categories(e)}}}),n("eNqOo",function(t,n){e(t.exports,"EventsView",()=>s);class s{constructor(){}creating_and_render_event_articles=e=>{if(e.events_loading)document.getElementById("events-main-section1-section1-div2").style.display="flex";else{if(document.getElementById("events-main-section1-section1-div2").style.display="none",!e.events_loading&&e.events.length>1){let t=document.getElementById("events-main-section1-section1");t.replaceChildren(document.getElementById("events-main-section1-section1-div2")),e.events.forEach(e=>{let n=document.createElement("article"),s=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div"),o=document.createElement("span"),c=document.createElement("span"),d=document.createElement("span"),r=document.createElement("span"),v=document.createElement("h3"),m=document.createElement("h4"),u=document.createElement("p"),_=document.createElement("p"),g=document.createElement("div");t.appendChild(n),n.append(s,i),s.append(o,c),i.append(a,l),a.append(m,g,u),g.append(d,v),l.append(r,_),n.classList.add("events-main-section1-section1-article"),s.classList.add("events-main-section1-section1-article-div1"),o.classList.add("events-main-section1-section1-article-span"),o.id="events-main-section1-section1-article-span1",c.classList.add("events-main-section1-section1-article-span"),c.id="events-main-section1-section1-article-span2",i.classList.add("events-main-section1-section1-article-div2"),a.classList.add("events-main-section1-section1-article-div2-div1"),m.classList.add("events-main-section1-section1-article-div2-div1-h4"),g.id="events-main-section1-section1-article-div2-div1-div1",d.classList.add("events-main-section1-section1-article-div2-div1-div1-span"),v.classList.add("events-main-section1-section1-article-div2-div1-div1-h3"),u.classList.add("events-main-section1-section1-article-div2-div1--p"),l.classList.add("events-main-section1-section1-article-div2-div2"),r.classList.add("events-main-section1-section1-article-div2-div2-span"),_.classList.add("events-main-section1-section1-article-div2-div2-p"),o.textContent=`Event Date: ${e.event_date}`,c.textContent=e.event_headline,m.textContent=`Event Time: ${e.event_time}`,d.textContent="Event Address:",v.textContent=e.event_address,u.textContent=`Event Type: ${e.event_type}`,_.textContent=e.event_description,r.textContent="Event Description:"})}if(!e.events_loading&&0===e.events.length){let e=document.getElementById("events-main-section1-section1");e.replaceChildren(document.getElementById("events-main-section1-section1-div2"));let t=document.createElement("div"),n=document.createElement("h3");e.appendChild(t),t.append(n),t.setAttribute("id","events-main-section1-section1-div1"),n.setAttribute("id","events-main-section1-section1-div1-h3"),n.textContent="Currently No events to Display"}}};creating_and_render_event_categories=e=>{let t=document.getElementById("events-main-section1-nav1-ul1-li-ul2");if(e.event_categories_loading){let e=Array.from(document.getElementsByClassName("events-main-section1-nav1-ul1-li-ul-li2"));e&&e.forEach(e=>{e.style.display="none"}),document.getElementById("events-main-section1-nav1-ul1-li-ul-li1").style.display="block"}else{let n=document.getElementById("events-main-section1-nav1-ul1-li-ul-li1");n&&(n.style.display="none"),t.replaceChildren(document.getElementById("events-main-section1-nav1-ul1-li-ul-li1")),e.event_categories.forEach(e=>{let n=document.createElement("li"),s=document.createElement("p");n.setAttribute("class","events-main-section1-nav1-ul1-li-ul-li2"),n.setAttribute("name",e),s.setAttribute("class","events-main-section1-nav1-ul1-li-ul-li-p"),s.textContent=e,t.append(n),n.append(s)})}};events_main_section1_nav1_ul1_li_hover=e=>{Array.from(document.getElementsByClassName("events-main-section1-nav1-ul1-li")).forEach(e=>{if("events_main_section1_nav1_ul1_li2"===e.id){let n=document.getElementById("events-main-section1-nav1-ul1-li-ul1");e.addEventListener("mouseenter",e=>{console.log("mainli1 mouse enter"),n.style.display="block",t(n)}),e.addEventListener("mouseleave",e=>{console.log("mainli1 mouse leave"),n.style.display="none"})}else if("events_main_section1_nav1_ul1_li3"===e.id){let n=document.getElementById("events-main-section1-nav1-ul1-li-ul2");e.addEventListener("mouseenter",e=>{console.log("mainli1 mouse enter"),n.style.display="block",t(n)}),e.addEventListener("mouseleave",e=>{console.log("mainli2 mouse leave"),n.style.display="none"})}});let t=t=>{"events-main-section1-nav1-ul1-li-ul1"===t.id?Array.from(document.getElementsByClassName("events-main-section1-nav1-ul1-li-ul-li1")).forEach(n=>{n.dataset.listenerAdded||(n.addEventListener("click",s=>{console.log(n.getAttribute("name")),e(n.getAttribute("name")),t.style.display="none"}),n.dataset.listenerAdded="true")}):"events-main-section1-nav1-ul1-li-ul2"===t.id&&Array.from(document.getElementsByClassName("events-main-section1-nav1-ul1-li-ul-li2")).forEach(n=>{n.dataset.listenerAdded||(n.addEventListener("click",s=>{console.log(n.getAttribute("name")),e(n.getAttribute("name")),t.style.display="none"}),n.dataset.listenerAdded="true")})}}}}),n("ewoyE",function(t,n){e(t.exports,"EventsModel",()=>s);class s{constructor(){this.state={events:[],events_loading:!1,event_categories:[],event_categories_loading:!1},this.listeners=[]}setState=e=>(this.state={...this.state,...e},this.notifyListeners(),console.log(this.state),this.state);getState=e=>{if(this.state[e])return this.state[e];console.log("no state exists")};registerListener=e=>{this.listeners.push(e),e(this.state)};notifyListeners=()=>{this.listeners.forEach(e=>{e(this.state)})};fetch_events=()=>(this.setState({events:[],events_loading:!0,event_categories_loading:!0}),fetch("https://abbey-road-api.onrender.com/api/event_page/fetch_events").then(e=>e.json()).then(e=>e.success&&e.data.length>0?(this.setState({events:e.data,events_loading:!1}),this.fetch_event_categories().then(e=>e.success?Promise.resolve(e):Promise.reject(!1)).catch(e=>(console.log(e),Promise.reject(!1)))):(this.setState({events:[],events_loading:!1}),Promise.resolve({success:!0}))).catch(e=>(this.setState({events:[],events_loading:!1}),Promise.resolve(!1))));fetch_event_categories=()=>{if(!(this.getState("events").length>0))return this.setState({event_categories_loading:!1,event_categories:["Meetings","Fundrasing","Community Outings"]}),Promise.resolve({success:!0});{let e=["Meetings","Fundrasing","Community Outings"],t=[];return this.getState("events").forEach(e=>{let n=e.event_type.trim(),s=n.charAt(0).toUpperCase()+n.slice(1).toLowerCase();t.includes(s)||t.push(s)}),t.forEach(t=>{e.includes(t)||e.push(t)}),this.setState({event_categories_loading:!1,event_categories:e}),Promise.resolve({success:!0})}};filter_event_categories=e=>{switch(e){case"Latest Events":let t=[...this.getState("events")].sort((e,t)=>{let n=new Date,[s,i,a]=e.event_date.split("-").map(Number),[l,o,c]=t.event_date.split("-").map(Number),d=new Date(a,i-1,s),r=new Date(c,o-1,l),v=Math.abs(d-n);return Math.abs(r-n)-v});this.setState({events:t});break;case"Oldest Events":let n=[...this.getState("events")].sort((e,t)=>{let n=new Date,[s,i,a]=e.event_date.split("-").map(Number),[l,o,c]=t.event_date.split("-").map(Number),d=new Date(a,i-1,s);return Math.abs(d-n)-Math.abs(new Date(c,o-1,l)-n)});this.setState({events:n});break;default:let s=[...this.getState("events")].sort((t,n)=>{if(t.event_type===e&&n.event_type!==e)return -1;if(n.event_type===e&&t.event_type!==e)return 1;let[s,i,a]=t.event_date.split("-").map(Number),[l,o,c]=n.event_date.split("-").map(Number),d=new Date(a,i-1,s);return new Date(c,o-1,l)-d});this.setState({events:s})}}}});
//# sourceMappingURL=controller.559399f3.js.map
