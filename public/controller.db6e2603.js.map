{"mappings":"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","sources":["<anon>","src/javascript/login-page/controller/controller.js","src/javascript/login-page/model/model.js","src/javascript/login-page/view/view.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire8ea6\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"8GHbB\", function(module, exports) {\n\n$parcel$export(module.exports, \"Login_controller\", () => $6533bedb3a1a137b$export$134e9633bbab39ee);\n\nvar $dx8Tm = parcelRequire(\"dx8Tm\");\n\nvar $eyBzO = parcelRequire(\"eyBzO\");\nclass $6533bedb3a1a137b$export$134e9633bbab39ee {\n    constructor(){\n        this.view = new (0, $eyBzO.Login_view)();\n        this.model = new (0, $dx8Tm.Login_model)();\n        this.view.click_submit_form(this.model.login_admin);\n        this.model.registerListener((state)=>{\n            this.view.render_submit_Form(state);\n        });\n    }\n}\n\n});\nparcelRegister(\"dx8Tm\", function(module, exports) {\n\n$parcel$export(module.exports, \"Login_model\", () => $9da5412f24a082cc$export$384f0b73cc48f5ff);\nclass $9da5412f24a082cc$export$384f0b73cc48f5ff {\n    constructor(){\n        this.state = {\n            password: null,\n            loading: false,\n            loggedIn: false,\n            failed_login: false\n        };\n        this.listeners = [];\n    }\n    setState = (newState)=>{\n        this.state = {\n            ...this.state,\n            ...newState\n        };\n        this.notifyListeners();\n        console.log(this.state);\n        return this.state;\n    };\n    getState = (stateName)=>{\n        if (this.state[stateName]) return this.state[stateName];\n        else console.log(\"no state exists\");\n    };\n    registerListener = (listener)=>{\n        this.listeners.push(listener);\n        listener(this.state);\n    };\n    notifyListeners = ()=>{\n        this.listeners.forEach((listener)=>{\n            listener(this.state);\n        });\n    };\n    login_admin = (password)=>{\n        var res, res1, err;\n        this.setState({\n            password: password,\n            loading: true,\n            loggedIn: false,\n            failed_login: false\n        });\n        return fetch(\"https://abbey-road-api.onrender.com/api/login-page/login_admin\", {\n            method: \"post\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                password: password\n            }),\n            credentials: 'include'\n        }).then((res)=>{\n            return res.json();\n        }).then((res)=>{\n            if (res.status) this.setState({\n                password: null,\n                loading: false,\n                loggedIn: true,\n                failed_login: false\n            });\n            else this.setState({\n                password: null,\n                loading: false,\n                loggedIn: false,\n                failed_login: true\n            });\n        }).catch((err)=>{\n            console.log(err);\n            this.setState({\n                password: null,\n                loading: false,\n                loggedIn: false,\n                failed_login: true\n            });\n        });\n    };\n}\n\n});\n\nparcelRegister(\"eyBzO\", function(module, exports) {\n\n$parcel$export(module.exports, \"Login_view\", () => $a9916392fc1cdc8c$export$31cd8839e2a0f3a5);\nclass $a9916392fc1cdc8c$export$31cd8839e2a0f3a5 {\n    constructor(){}\n    click_submit_form = (modelFunction)=>{\n        const form = document.getElementById(\"login-main-form\");\n        const input = document.getElementById(\"login-password\");\n        form.addEventListener(\"submit\", (event)=>{\n            event.preventDefault();\n            modelFunction(input.value);\n            input.value = \"\";\n        });\n    };\n    render_submit_Form = (state)=>{\n        if (state.loading) {\n            const mainDiv = document.getElementById(\"login-main-form-div1\");\n            const loadingDiv = document.getElementById(\"login-page-loading\");\n            const errorDiv = document.getElementById(\"login-main-p1\");\n            mainDiv.style.display = 'block';\n            loadingDiv.style.display = 'block';\n            errorDiv.style.display = 'none';\n        } else {\n            if (state.loggedIn) window.location.href = \"./admin.html\";\n            else if (state.failed_login) {\n                const mainDiv = document.getElementById(\"login-main-form-div1\");\n                const errorDiv = document.getElementById(\"login-main-p1\");\n                const loadingDiv = document.getElementById(\"login-page-loading\");\n                mainDiv.style.display = 'block';\n                errorDiv.style.display = 'flex';\n                loadingDiv.style.display = 'none';\n            }\n        }\n    };\n}\n\n});\n\n\n\n//# sourceMappingURL=controller.db6e2603.js.map\n","import {Login_model} from '../model/model.js';\nimport {Login_view} from '../view/view.js';\n\nexport class Login_controller {\n\n\tconstructor(){\n\n\t\tthis.view = new Login_view();\n\t\tthis.model = new Login_model();\n\n\t\tthis.view.click_submit_form(\n\t\t\tthis.model.login_admin\n\t\t)\n\n\t\tthis.model.registerListener((state)=>{this.view.render_submit_Form(state)});\n\t}\n}","export class Login_model {\n\n\tconstructor(){\n\t\tthis.state = {\n\t\t\tpassword: null,\n\t\t\tloading: false,\n\t\t\tloggedIn: false,\n\t\t\tfailed_login: false\n\t\t}\n\t\tthis.listeners = [];\n\t}\n\n\tsetState = (newState) =>{ \n      this.state = {...this.state,...newState};\n      this.notifyListeners();\n      console.log(this.state)\n      return this.state\n\t}\n\n\tgetState = (stateName) => {\n\t    if (this.state[stateName]) {\n\t      return this.state[stateName];\n\t    } else {\n\t      console.log(\"no state exists\");\n\t    }\n\t};\n\n\tregisterListener = (listener) => {\n\n\t    this.listeners.push(listener)\n\t    listener(this.state);\n\t}\n\n\tnotifyListeners = () => {\n\t    this.listeners.forEach((listener)=>{\n\t      listener(this.state)\n\t    })\n\t}\n\n\tlogin_admin = (password) => {\n\n\t\tif (process.env.NODE_ENV === \"production\"){\n\n\t\t\tthis.setState({\n\t\t\t\tpassword: password,\n\t\t\t\tloading: true,\n\t\t\t\tloggedIn: false,\n\t\t\t\tfailed_login: false\n\t\t\t})\n\n\t\t\treturn fetch(\"https://abbey-road-api.onrender.com/api/login-page/login_admin\",{\n\t\t\t\tmethod: \"post\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\" : \"application/json\"\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tpassword: password\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include'\n\t\t\t})\n\t\t\t.then((res)=>{\n\t\t\t\treturn res.json()\n\t\t\t})\n\t\t\t.then((res)=>{\n\t\t\t\tif(res.status){\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tpassword:null,\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tloggedIn: true,\n\t\t\t\t\t\tfailed_login: false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tpassword:null,\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tloggedIn: false,\n\t\t\t\t\t\tfailed_login: true\n\t\t\t\t\t})\n\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err)=>{\n\n\t\t\t\tconsole.log(err)\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tpassword: null,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tloggedIn: false,\n\t\t\t\t\tfailed_login: true\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\telse{\n\n\t\t\tthis.setState({\n\t\t\t\tpassword: password,\n\t\t\t\tloading: true,\n\t\t\t\tloggedIn: false,\n\t\t\t\tfailed_login: false\n\t\t\t})\n\n\t\t\treturn fetch(\"http://localhost:3001/api/login-page/login_admin\",{\n\t\t\t\tmethod: \"post\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\" : \"application/json\"\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tpassword: password\n\t\t\t\t})\n\t\t\t})\n\t\t\t.then((res)=>{\n\t\t\t\treturn res.json()\n\t\t\t})\n\t\t\t.then((res)=>{\n\t\t\t\tif(res.status){\n\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tpassword:null,\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tloggedIn: true,\n\t\t\t\t\t\tfailed_login: false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tpassword:null,\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\tloggedIn: false,\n\t\t\t\t\t\tfailed_login: true\n\t\t\t\t\t})\n\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err)=>{\n\n\t\t\t\tconsole.log(err)\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tpassword: null,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tloggedIn: false,\n\t\t\t\t\tfailed_login: true\n\t\t\t\t})\n\t\t\t})\n\n\t\t}\n\t}\n}","export class Login_view{\n\n\tconstructor(){\n\n\t}\n\n\tclick_submit_form = (modelFunction) => {\n\n\t\tconst form = \n\t\tdocument.getElementById(\"login-main-form\");\n\n\t\tconst input = \n\t\tdocument.getElementById(\"login-password\");\n\n\t\tform.addEventListener(\"submit\", (event)=>{\n\n\t\t\tevent.preventDefault();\n\n\t\t\tmodelFunction(input.value)\n\n\t\t\tinput.value = \"\"\n\t\t})\n\t}\n\n\trender_submit_Form = (state) => {\n\n\t\tif(state.loading){\n\n\t\t\tconst mainDiv = \n\t\t\tdocument.getElementById(\"login-main-form-div1\");\n\n\t\t\tconst loadingDiv = \n\t\t\tdocument.getElementById(\"login-page-loading\");\n\n\t\t\tconst errorDiv = \n\t\t\tdocument.getElementById(\"login-main-p1\");\n\n\t\t\tmainDiv.style.display = 'block';\n\n\t\t\tloadingDiv.style.display = 'block';\n\n\t\t\terrorDiv.style.display = 'none';\n\n\t\t}\n\n\t\telse{\n\n\t\t\tif(state.loggedIn){\n\n\t\t\t\t\twindow.location.href = \"./admin.html\"\n\t\t\t}\n\n\t\t\telse{\n\n\t\t\t\tif(state.failed_login){\n\t\t\t\t\tconst mainDiv = \n\t\t\t\t\tdocument.getElementById(\"login-main-form-div1\");\n\n\t\t\t\t\tconst errorDiv = \n\t\t\t\t\tdocument.getElementById(\"login-main-p1\");\n\n\t\t\t\t\tconst loadingDiv = \n\t\t\t\t\tdocument.getElementById(\"login-page-loading\");\n\n\t\t\t\t\tmainDiv.style.display = 'block';\n\n\t\t\t\t\terrorDiv.style.display = 'flex';\n\n\t\t\t\t\tloadingDiv.style.display = 'none';\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}\n}"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","$6533bedb3a1a137b$export$134e9633bbab39ee","$dx8Tm","$eyBzO","view","Login_view","model","Login_model","click_submit_form","login_admin","registerListener","state","render_submit_Form","$9da5412f24a082cc$export$384f0b73cc48f5ff","password","loading","loggedIn","failed_login","listeners","setState","newState","notifyListeners","console","log","getState","stateName","listener","push","forEach","fetch","method","headers","body","JSON","stringify","credentials","then","res","json","status","catch","err","$a9916392fc1cdc8c$export$31cd8839e2a0f3a5","modelFunction","form","document","getElementById","input","addEventListener","event","preventDefault","value","mainDiv","loadingDiv","errorDiv","style","display","window","location","href"],"version":3,"file":"controller.db6e2603.js.map"}